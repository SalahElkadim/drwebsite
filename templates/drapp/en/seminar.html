{% extends "base.html" %}
{% load static %}
{% block title %} Seminar Booking | Sabr Consult {% endblock %}
{% block meta_description %}
<meta name="description" content="Book a specialized seminar for governmental and private entities with Sabr Consult experts in forensic linguistics. Fill out the form and we’ll contact you within 24 hours.">
{% endblock %}
{% block content %}
   <link rel="stylesheet" href="{% static 'css/about.css' %}">

<section class="consultation">
    <div class="consultation-form">
        <div class="form-header">
            <h2><i class="fas fa-comments"></i> <span data-key="Book a Seminar for Governmental or Private Entities">Book a Seminar for Governmental or Private Entities</span></h2>
            <p data-key="Fill out the form and one of our experts will contact you within 24 hours.">Fill out the form and one of our experts will contact you within 24 hours.</p>
        </div>
        
        <form id="seminarForm">
            {% csrf_token %}
            <div class="form-group">
                <label for="name" data-key="Entity Name">Entity Name</label>
                <input type="text" id="name" class="form-control" required data-placeholder-ar="أدخل اسمك هنا" data-placeholder-en="Enter your name here" placeholder="Enter your name here">
            </div>
            
            <div class="form-group">
                <label for="email" data-key="Email">Email</label>
                <input type="email" id="email" class="form-control" required placeholder="example@domain.com">
            </div>
            
            <div class="form-group">
                <label for="phone" data-key="Phone Number">Phone Number</label>
                <input type="tel" id="phone" class="form-control" required placeholder="+974XXXXXXXX">
            </div>
            
            <div class="form-group">
                <label for="service" data-key="Entity Type">Entity Type</label>
                <select id="service" class="form-control" required>
                    <option value="" disabled selected data-key="Select entity type">Select entity type</option>
                    <option value="government" data-key="Government Entity">Government Entity</option>
                    <option value="private" data-key="Private Entity">Private Entity</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="message" data-key="Additional Details">Additional Details</label>
                <textarea id="message" class="form-control" required data-placeholder-ar="أخبرنا أكثر عن احتياجاتك..." data-placeholder-en="Tell us more about your needs..." placeholder="Tell us more about your needs..."></textarea>
            </div>
            
            <button type="submit" class="submit-btn">
                <i class="fas fa-paper-plane"></i> <span data-key="Submit Request">Submit Request</span>
            </button>
            
            <div class="success-message" id="successMessage">
                <i class="fas fa-check-circle" style="font-size: 40px; margin-bottom: 10px;"></i>
                <h3 data-key="Your request has been sent successfully!">Your request has been sent successfully!</h3>
                <p data-key="We will contact you within 24 working hours.">We will contact you within 24 working hours.</p>
            </div>
        </form>
    </div>
</section>

<script>
document.getElementById('seminarForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const data = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        service: document.getElementById('service').value,
        message: document.getElementById('message').value,
    };

    fetch('/submit-seminar/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCookie('csrftoken')
        },
        body: JSON.stringify(data)
    })
    .then(res => res.json())
    .then(res => {
        if (res.status === 'success') {
            document.getElementById('successMessage').style.display = 'block';
            document.getElementById('seminarForm').reset();
        } else {
            alert(document.querySelector('[data-key="An error occurred while sending."]')?.textContent || 'An error occurred while sending.');
        }
    });

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
});
</script>

{% endblock %}
